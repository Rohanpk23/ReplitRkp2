<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="1800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #1a1a1a; }
      .heading { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #2563eb; }
      .text { font-family: Arial, sans-serif; font-size: 12px; fill: #374151; }
      .small-text { font-family: Arial, sans-serif; font-size: 10px; fill: #6b7280; }
      .data-box { fill: #eff6ff; stroke: #2563eb; stroke-width: 2; rx: 8; }
      .process-box { fill: #f0f9ff; stroke: #0ea5e9; stroke-width: 2; rx: 8; }
      .ai-box { fill: #f3e8ff; stroke: #7c3aed; stroke-width: 2; rx: 8; }
      .feedback-box { fill: #fef3c7; stroke: #f59e0b; stroke-width: 2; rx: 8; }
      .result-box { fill: #ecfdf5; stroke: #10b981; stroke-width: 2; rx: 8; }
      .arrow { stroke: #374151; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .feedback-arrow { stroke: #f59e0b; stroke-width: 2; fill: none; marker-end: url(#arrowhead-orange); }
      .data-arrow { stroke: #2563eb; stroke-width: 2; fill: none; marker-end: url(#arrowhead-blue); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2563eb"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" class="title">AI Occupancy Translator - Complete System Flow</text>
  
  <!-- Data Sources Section -->
  <text x="50" y="70" class="heading">DATA SOURCES</text>
  
  <!-- Master Occupancy List -->
  <rect x="50" y="90" width="180" height="80" class="data-box"/>
  <text x="140" y="115" text-anchor="middle" class="heading">Master Occupancy List</text>
  <text x="60" y="135" class="text">288+ Authentic Codes</text>
  <text x="60" y="150" class="small-text">‚Ä¢ From CSV: nature_of_work_master.csv</text>
  <text x="60" y="162" class="small-text">‚Ä¢ Prevents AI hallucination</text>
  
  <!-- Training Data -->
  <rect x="260" y="90" width="180" height="80" class="data-box"/>
  <text x="350" y="115" text-anchor="middle" class="heading">Training Examples</text>
  <text x="270" y="135" class="text">41 Real Business Cases</text>
  <text x="270" y="150" class="small-text">‚Ä¢ From CSV: business_descriptions.csv</text>
  <text x="270" y="162" class="small-text">‚Ä¢ Used as reasoning patterns only</text>
  
  <!-- Recent Corrections -->
  <rect x="470" y="90" width="180" height="80" class="data-box"/>
  <text x="560" y="115" text-anchor="middle" class="heading">Recent Corrections</text>
  <text x="480" y="135" class="text">User Feedback History</text>
  <text x="480" y="150" class="small-text">‚Ä¢ Wrong ‚Üí Correct mappings</text>
  <text x="480" y="162" class="small-text">‚Ä¢ Helps AI learn from mistakes</text>

  <!-- Input Processing Section -->
  <text x="50" y="220" class="heading">INPUT PROCESSING</text>
  
  <!-- User Input -->
  <rect x="50" y="240" width="200" height="100" class="process-box"/>
  <text x="150" y="265" text-anchor="middle" class="heading">Business Description</text>
  <text x="60" y="285" class="text">Multilingual Support:</text>
  <text x="60" y="300" class="small-text">‚Ä¢ English: "software development"</text>
  <text x="60" y="312" class="small-text">‚Ä¢ Hindi: "‡§∏‡•â‡§´‡•ç‡§ü‡§µ‡•á‡§Ø‡§∞ ‡§µ‡§ø‡§ï‡§æ‡§∏"</text>
  <text x="60" y="324" class="small-text">‚Ä¢ Hinglish: "software banate hai"</text>
  
  <!-- Language Detection -->
  <rect x="300" y="240" width="180" height="100" class="process-box"/>
  <text x="390" y="265" text-anchor="middle" class="heading">Keyword Extraction</text>
  <text x="310" y="285" class="text">Automatic Processing:</text>
  <text x="310" y="300" class="small-text">‚Ä¢ Filters common words</text>
  <text x="310" y="312" class="small-text">‚Ä¢ Extracts business terms</text>
  <text x="310" y="324" class="small-text">‚Ä¢ Supports Hindi/English stopwords</text>

  <!-- Training Data Matching -->
  <rect x="520" y="240" width="180" height="100" class="process-box"/>
  <text x="610" y="265" text-anchor="middle" class="heading">Pattern Matching</text>
  <text x="530" y="285" class="text">Similarity Analysis:</text>
  <text x="530" y="300" class="small-text">‚Ä¢ Scores vs training examples</text>
  <text x="530" y="312" class="small-text">‚Ä¢ Min score threshold: 10% desc length</text>
  <text x="530" y="324" class="small-text">‚Ä¢ Max 3 similar examples returned</text>

  <!-- AI Processing Section -->
  <text x="50" y="390" class="heading">AI PROCESSING CORE</text>
  
  <!-- Gemini 2.5 Pro -->
  <rect x="50" y="410" width="600" height="120" class="ai-box"/>
  <text x="350" y="435" text-anchor="middle" class="heading">Google Gemini 2.5 Pro Model</text>
  <text x="60" y="455" class="text">System Prompt Components:</text>
  <text x="60" y="470" class="small-text">1. Master occupancy list (288+ codes) - MUST match exactly</text>
  <text x="60" y="482" class="small-text">2. Training examples as reasoning patterns (NOT rigid rules)</text>
  <text x="60" y="494" class="small-text">3. Recent corrections to avoid repeat mistakes</text>
  <text x="60" y="506" class="small-text">4. Flexibility safeguards for novel business types</text>
  <text x="60" y="518" class="small-text">5. Multilingual understanding (English/Hindi/Hinglish)</text>

  <!-- Flexibility Validator -->
  <rect x="720" y="410" width="200" height="120" class="ai-box"/>
  <text x="820" y="435" text-anchor="middle" class="heading">Flexibility Validator</text>
  <text x="730" y="455" class="text">Safeguards:</text>
  <text x="730" y="470" class="small-text">‚Ä¢ Prevents rule-based behavior</text>
  <text x="730" y="482" class="small-text">‚Ä¢ Encourages creative reasoning</text>
  <text x="730" y="494" class="small-text">‚Ä¢ Detects novel business types</text>
  <text x="730" y="506" class="small-text">‚Ä¢ Validates business logic focus</text>
  <text x="730" y="518" class="small-text">‚Ä¢ Suggests multiple options</text>

  <!-- Confidence Calculation -->
  <text x="50" y="580" class="heading">CONFIDENCE CALCULATION</text>
  
  <rect x="50" y="600" width="280" height="100" class="result-box"/>
  <text x="190" y="625" text-anchor="middle" class="heading">AI Confidence Levels</text>
  <text x="60" y="645" class="text">Based on AI's certainty:</text>
  <text x="60" y="660" class="small-text">‚Ä¢ High (85-95%): Strong keyword + pattern match</text>
  <text x="60" y="672" class="small-text">‚Ä¢ Medium (65-84%): Good business logic reasoning</text>
  <text x="60" y="684" class="small-text">‚Ä¢ Low (40-64%): Uncertain, multiple possibilities</text>

  <rect x="370" y="600" width="280" height="100" class="result-box"/>
  <text x="510" y="625" text-anchor="middle" class="heading">Output Validation</text>
  <text x="380" y="645" class="text">Quality Checks:</text>
  <text x="380" y="660" class="small-text">‚Ä¢ All suggestions must exist in master list</text>
  <text x="380" y="672" class="small-text">‚Ä¢ Invalid suggestions automatically filtered</text>
  <text x="380" y="684" class="small-text">‚Ä¢ Empty result if no confident matches</text>

  <!-- Results Section -->
  <text x="50" y="750" class="heading">RESULTS & FEEDBACK</text>
  
  <!-- AI Suggestions -->
  <rect x="50" y="770" width="200" height="120" class="result-box"/>
  <text x="150" y="795" text-anchor="middle" class="heading">AI Suggestions</text>
  <text x="60" y="815" class="text">For each suggestion:</text>
  <text x="60" y="830" class="small-text">‚Ä¢ Occupancy code (exact match)</text>
  <text x="60" y="842" class="small-text">‚Ä¢ Detailed reasoning</text>
  <text x="60" y="854" class="small-text">‚Ä¢ Confidence level</text>
  <text x="60" y="866" class="small-text">‚Ä¢ Links to specific phrases</text>
  <text x="60" y="878" class="small-text">‚Ä¢ 0-3 suggestions possible</text>

  <!-- User Feedback -->
  <rect x="300" y="770" width="200" height="120" class="feedback-box"/>
  <text x="400" y="795" text-anchor="middle" class="heading">User Feedback</text>
  <text x="310" y="815" class="text">User Actions:</text>
  <text x="310" y="830" class="small-text">‚Ä¢ üëç Thumbs Up (Positive)</text>
  <text x="310" y="842" class="small-text">‚Ä¢ üëé Thumbs Down (Negative)</text>
  <text x="310" y="854" class="small-text">‚Ä¢ ‚úèÔ∏è Corrections (Wrong ‚Üí Right)</text>
  <text x="310" y="866" class="small-text">‚Ä¢ üìù Reasoning for corrections</text>
  <text x="310" y="878" class="small-text">‚Ä¢ Improves future suggestions</text>

  <!-- Analytics Calculation -->
  <rect x="550" y="770" width="200" height="120" class="feedback-box"/>
  <text x="650" y="795" text-anchor="middle" class="heading">Analytics Calculation</text>
  <text x="560" y="815" class="text">Metrics Formula:</text>
  <text x="560" y="830" class="small-text">‚Ä¢ Accuracy = (üëç √∑ Total feedback) √ó 100</text>
  <text x="560" y="842" class="small-text">‚Ä¢ Total Analyses = Count all</text>
  <text x="560" y="854" class="small-text">‚Ä¢ Corrections = Count ‚úèÔ∏è submissions</text>
  <text x="560" y="866" class="small-text">‚Ä¢ Confidence breakdown by level</text>
  <text x="560" y="878" class="small-text">‚Ä¢ Processing time averaging</text>

  <!-- Learning Loop -->
  <text x="50" y="940" class="heading">CONTINUOUS LEARNING SYSTEM</text>
  
  <rect x="50" y="960" width="300" height="80" class="feedback-box"/>
  <text x="200" y="985" text-anchor="middle" class="heading">Feedback Storage & Learning</text>
  <text x="60" y="1005" class="text">System Improvements:</text>
  <text x="60" y="1020" class="small-text">‚Ä¢ Stores all corrections in database</text>
  <text x="60" y="1032" class="small-text">‚Ä¢ Feeds recent corrections to AI context (last 10)</text>

  <rect x="400" y="960" width="300" height="80" class="feedback-box"/>
  <text x="550" y="985" text-anchor="middle" class="heading">Flexible Learning Safeguards</text>
  <text x="410" y="1005" class="text">Learning Approach:</text>
  <text x="410" y="1020" class="small-text">‚Ä¢ Training data = reasoning patterns (not rules)</text>
  <text x="410" y="1032" class="small-text">‚Ä¢ Creative adaptation for novel business types</text>

  <!-- File Impact Section -->
  <text x="50" y="1090" class="heading">INPUT FILES IMPACT ON SYSTEM</text>
  
  <!-- CSV Impact -->
  <rect x="50" y="1110" width="280" height="120" class="data-box"/>
  <text x="190" y="1135" text-anchor="middle" class="heading">business_descriptions.csv</text>
  <text x="60" y="1155" class="text">Impact on AI Processing:</text>
  <text x="60" y="1170" class="small-text">‚Ä¢ 41 real business cases with known codes</text>
  <text x="60" y="1182" class="small-text">‚Ä¢ Provides reasoning patterns for AI</text>
  <text x="60" y="1194" class="small-text">‚Ä¢ Filtered by quality (min 10 chars desc)</text>
  <text x="60" y="1206" class="small-text">‚Ä¢ Scored by keyword similarity</text>
  <text x="60" y="1218" class="small-text">‚Ä¢ Used flexibly, not as rigid rules</text>

  <rect x="370" y="1110" width="280" height="120" class="data-box"/>
  <text x="510" y="1135" text-anchor="middle" class="heading">nature_of_work_master.csv</text>
  <text x="380" y="1155" class="text">Impact on AI Processing:</text>
  <text x="380" y="1170" class="small-text">‚Ä¢ 288+ authentic occupancy codes</text>
  <text x="380" y="1182" class="small-text">‚Ä¢ Prevents AI hallucination completely</text>
  <text x="380" y="1194" class="small-text">‚Ä¢ All suggestions validated against this</text>
  <text x="380" y="1206" class="small-text">‚Ä¢ Auto-loaded on system startup</text>
  <text x="380" y="1218" class="small-text">‚Ä¢ Core constraint for AI suggestions</text>

  <!-- Language Processing -->
  <text x="50" y="1280" class="heading">MULTILINGUAL PROCESSING DETAIL</text>
  
  <rect x="50" y="1300" width="600" height="100" class="process-box"/>
  <text x="350" y="1325" text-anchor="middle" class="heading">How Hindi, English, and Hinglish Are Handled</text>
  <text x="60" y="1345" class="text">Language Detection & Processing:</text>
  <text x="60" y="1360" class="small-text">1. AI automatically detects input language (English/Hindi/Hinglish mix)</text>
  <text x="60" y="1372" class="small-text">2. Keyword extraction filters Hindi stopwords: 'hai', 'ka', 'ke', 'mein', 'kaam', etc.</text>
  <text x="60" y="1384" class="small-text">3. Business terms extracted regardless of language</text>
  <text x="60" y="1396" class="small-text">4. AI trained on multilingual patterns, understands context across languages</text>

  <!-- Technical Architecture -->
  <text x="50" y="1450" class="heading">TECHNICAL ARCHITECTURE</text>
  
  <rect x="50" y="1470" width="200" height="100" class="ai-box"/>
  <text x="150" y="1495" text-anchor="middle" class="heading">AI Models Used</text>
  <text x="60" y="1515" class="text">Model Selection:</text>
  <text x="60" y="1530" class="small-text">‚Ä¢ Gemini 2.5 Pro: Main analysis</text>
  <text x="60" y="1542" class="small-text">  (complex reasoning required)</text>
  <text x="60" y="1554" class="small-text">‚Ä¢ Gemini 2.5 Flash: Feedback ack</text>
  <text x="60" y="1566" class="small-text">  (simple responses, cost-effective)</text>

  <rect x="280" y="1470" width="200" height="100" class="process-box"/>
  <text x="380" y="1495" text-anchor="middle" class="heading">Database Storage</text>
  <text x="290" y="1515" class="text">PostgreSQL Tables:</text>
  <text x="290" y="1530" class="small-text">‚Ä¢ analyses: AI results storage</text>
  <text x="290" y="1542" class="small-text">‚Ä¢ feedback: User corrections</text>
  <text x="290" y="1554" class="small-text">‚Ä¢ occupancy_codes: Master list</text>
  <text x="290" y="1566" class="small-text">‚Ä¢ All linked for learning</text>

  <rect x="510" y="1470" width="200" height="100" class="result-box"/>
  <text x="610" y="1495" text-anchor="middle" class="heading">Quality Assurance</text>
  <text x="520" y="1515" class="text">Validation Layers:</text>
  <text x="520" y="1530" class="small-text">‚Ä¢ Master list validation</text>
  <text x="520" y="1542" class="small-text">‚Ä¢ Flexibility checks</text>
  <text x="520" y="1554" class="small-text">‚Ä¢ User feedback integration</text>
  <text x="520" y="1566" class="small-text">‚Ä¢ Continuous learning loop</text>

  <!-- Flow Arrows -->
  <!-- Data to Processing -->
  <line x1="140" y1="170" x2="140" y2="240" class="data-arrow"/>
  <line x1="350" y1="170" x2="390" y2="240" class="data-arrow"/>
  <line x1="560" y1="170" x2="610" y2="240" class="data-arrow"/>
  
  <!-- Processing flow -->
  <line x1="250" y1="290" x2="300" y2="290" class="arrow"/>
  <line x1="480" y1="290" x2="520" y2="290" class="arrow"/>
  
  <!-- To AI -->
  <line x1="350" y1="340" x2="350" y2="410" class="arrow"/>
  <line x1="610" y1="340" x2="720" y2="450" class="arrow"/>
  
  <!-- To Results -->
  <line x1="350" y1="530" x2="190" y2="600" class="arrow"/>
  <line x1="350" y1="530" x2="510" y2="600" class="arrow"/>
  
  <!-- Results to Feedback -->
  <line x1="190" y1="700" x2="190" y2="770" class="arrow"/>
  <line x1="250" y1="830" x2="300" y2="830" class="arrow"/>
  <line x1="500" y1="830" x2="550" y2="830" class="arrow"/>
  
  <!-- Feedback Loop -->
  <line x1="400" y1="890" x2="400" y2="960" class="feedback-arrow"/>
  <line x1="350" y1="1000" x2="140" y2="1000" class="feedback-arrow"/>
  <line x1="140" y1="1000" x2="140" y2="170" class="feedback-arrow"/>
  
  <!-- File Impact -->
  <line x1="190" y1="1110" x2="190" y2="1300" class="data-arrow"/>
  <line x1="510" y1="1110" x2="510" y2="1300" class="data-arrow"/>

  <!-- Legend -->
  <text x="1000" y="100" class="heading">LEGEND</text>
  <rect x="1000" y="120" width="20" height="15" class="data-box"/>
  <text x="1030" y="132" class="small-text">Data Sources</text>
  <rect x="1000" y="140" width="20" height="15" class="process-box"/>
  <text x="1030" y="152" class="small-text">Processing Steps</text>
  <rect x="1000" y="160" width="20" height="15" class="ai-box"/>
  <text x="1030" y="172" class="small-text">AI Processing</text>
  <rect x="1000" y="180" width="20" height="15" class="feedback-box"/>
  <text x="1030" y="192" class="small-text">Learning & Feedback</text>
  <rect x="1000" y="200" width="20" height="15" class="result-box"/>
  <text x="1030" y="212" class="small-text">Results & Validation</text>
  
  <line x1="1000" y1="230" x2="1020" y2="230" class="arrow"/>
  <text x="1030" y="235" class="small-text">Process Flow</text>
  <line x1="1000" y1="245" x2="1020" y2="245" class="feedback-arrow"/>
  <text x="1030" y="250" class="small-text">Feedback Loop</text>
  <line x1="1000" y1="260" x2="1020" y2="260" class="data-arrow"/>
  <text x="1030" y="265" class="small-text">Data Flow</text>

  <!-- System Summary -->
  <text x="1000" y="320" class="heading">SYSTEM SUMMARY</text>
  <text x="1000" y="340" class="small-text">‚Ä¢ Multilingual AI occupancy translator</text>
  <text x="1000" y="355" class="small-text">‚Ä¢ 288+ authentic occupancy codes</text>
  <text x="1000" y="370" class="small-text">‚Ä¢ 41 training examples for patterns</text>
  <text x="1000" y="385" class="small-text">‚Ä¢ Flexible learning with safeguards</text>
  <text x="1000" y="400" class="small-text">‚Ä¢ User feedback improves accuracy</text>
  <text x="1000" y="415" class="small-text">‚Ä¢ Prevents AI hallucination</text>
  <text x="1000" y="430" class="small-text">‚Ä¢ Supports Hindi/English/Hinglish</text>
  <text x="1000" y="445" class="small-text">‚Ä¢ Confidence-based suggestions</text>
  <text x="1000" y="460" class="small-text">‚Ä¢ Continuous learning system</text>
</svg>